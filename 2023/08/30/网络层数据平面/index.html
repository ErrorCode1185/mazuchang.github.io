<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"mazuchang.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","width":320,"display":"post","padding":18,"offset":12,"onmobile":true},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="网络层 - 数据平面网络层服务网络层服务主要负责在发送主机与接收主机之间传送段（segment），具体形式是在发送端将段封装到数据报中，在接收端将段上交给传输层实体。网络层协议存在于每一个主机和路由器上，路由器会检查每一个经过它的IP数据报的头部并转发数据包。  网络层关键功能转发将分组从路由器的输入接口转发到合适的输出接口【局部的功能】【转发决定了一个具体的数据交换节点从哪个端口入，通过哪个合适">
<meta property="og:type" content="article">
<meta property="og:title" content="网络层 - 数据平面">
<meta property="og:url" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/index.html">
<meta property="og:site_name" content="mazuchang">
<meta property="og:description" content="网络层 - 数据平面网络层服务网络层服务主要负责在发送主机与接收主机之间传送段（segment），具体形式是在发送端将段封装到数据报中，在接收端将段上交给传输层实体。网络层协议存在于每一个主机和路由器上，路由器会检查每一个经过它的IP数据报的头部并转发数据包。  网络层关键功能转发将分组从路由器的输入接口转发到合适的输出接口【局部的功能】【转发决定了一个具体的数据交换节点从哪个端口入，通过哪个合适">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672641959497.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672472290886.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672472399552.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672833168742.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672473320459.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1707986970161.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1708052082136.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672473793084.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672473893265.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/9fb86f3e6cab4a9a837dafe9786fdf67.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672474501252.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672474880299.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672475267384.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672475396379.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672550552130.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672550674894.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672550779021.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672550876269.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672550934694.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/323eb8fabc9e437f9866f83d12a7b853.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/c85ee960de49456f9bc71a2e8eca1a71.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/34f79aeccecc8a8d4778838ecd55278b.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/9c6f7290ee0a51ff589205eba5242aaa.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/93a5a3bde247573aa72cf73226d7f8b2.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/3c4accfa49e3e6b6b0324e58a9abc638.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/f7727d7e80ffcc506bc25034cdde2226.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/64c23f4d662576f1d3352a398558988d.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/2c6c5341518abdc87ef881a14253ed8c.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672642245915.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672643000577.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672643398913.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/%E8%B7%AF%E7%94%B1%E8%81%9A%E5%90%88.jpg">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672665034483.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672665221376.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/download.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/download%20(1).png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/download%20(2).png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/download%20(3).png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/download%20(4).png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672667124873.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672667195297.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672667171436.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672668173422.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672667402023.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672667460530.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672833168742.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672835501755.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672835573794.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672835925091.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672835980854.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672836416872.png">
<meta property="og:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672836601682.png">
<meta property="article:published_time" content="2023-08-29T16:00:00.000Z">
<meta property="article:modified_time" content="2024-02-17T02:23:29.542Z">
<meta property="article:author" content="mazuchang">
<meta property="article:tag" content="计算机网络">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672641959497.png">

<link rel="canonical" href="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>网络层 - 数据平面 | mazuchang</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">mazuchang</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">读万卷书，行万里路。</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://mazuchang.github.io/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="mazuchang">
      <meta itemprop="description" content="前行纵然步履维艰，你仍旧走在正确的道路上。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mazuchang">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          网络层 - 数据平面
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-08-30 00:00:00" itemprop="dateCreated datePublished" datetime="2023-08-30T00:00:00+08:00">2023-08-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-02-17 10:23:29" itemprop="dateModified" datetime="2024-02-17T10:23:29+08:00">2024-02-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index"><span itemprop="name">计算机网络</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="网络层-数据平面"><a href="#网络层-数据平面" class="headerlink" title="网络层 - 数据平面"></a>网络层 - 数据平面</h1><h2 id="网络层服务"><a href="#网络层服务" class="headerlink" title="网络层服务"></a>网络层服务</h2><p>网络层服务主要负责在发送主机与接收主机之间传送段（segment），具体形式是在发送端将段封装到数据报中，在接收端将段上交给传输层实体。网络层协议存在于每一个主机和路由器上，路由器会检查每一个经过它的IP数据报的头部并转发数据包。</p>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672641959497.png" alt="1672641959497"></p>
<h3 id="网络层关键功能"><a href="#网络层关键功能" class="headerlink" title="网络层关键功能"></a>网络层关键功能</h3><h4 id="转发"><a href="#转发" class="headerlink" title="转发"></a>转发</h4><p>将分组从路由器的输入接口转发到合适的输出接口【局部的功能】【转发决定了一个具体的数据交换节点从哪个端口入，通过哪个合适的端口把它放出去】<strong>【数据平面的部分】</strong> </p>
<h4 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h4><p>使用路由算法来决定分组从发送主机到目标接收主机的路径【全局的功能】【路由决定了路径】<strong>【控制平面的部分】</strong></p>
<ul>
<li>路由选择算法</li>
<li>路由选择协议</li>
</ul>
<h3 id="网络层：数据平面、控制平面"><a href="#网络层：数据平面、控制平面" class="headerlink" title="网络层：数据平面、控制平面"></a>网络层：数据平面、控制平面</h3><h4 id="数据平面"><a href="#数据平面" class="headerlink" title="数据平面"></a>数据平面</h4><p><strong>数据平面是一个本地概念</strong>，它是每个路由器的功能，数据平面决定了从路由器输入端口到达分组如何转发到输出端口。</p>
<h5 id="转发方法："><a href="#转发方法：" class="headerlink" title="转发方法："></a>转发方法：</h5><ul>
<li>传统方式：基于目标地址 + 转发表</li>
<li>SDN方式：基于多个字段 + 流表</li>
</ul>
<h4 id="控制平面"><a href="#控制平面" class="headerlink" title="控制平面"></a>控制平面</h4><p>控制平面是网络范围内的逻辑，它决定了数据报如何在路由器之间路由，决定数据报从源到目标主机之间的端到端的路径</p>
<h5 id="路由方法："><a href="#路由方法：" class="headerlink" title="路由方法："></a>路由方法：</h5><ul>
<li>传统的路由算法：在路由器中被实现</li>
<li>software-defined networking（SDN）：在远端的服务器中实现</li>
</ul>
<h3 id="数据平面-x2F-控制平面实现方式"><a href="#数据平面-x2F-控制平面实现方式" class="headerlink" title="数据平面&#x2F;控制平面实现方式"></a>数据平面&#x2F;控制平面实现方式</h3><h4 id="传统方式：每一路由器（Per-router）控制平面"><a href="#传统方式：每一路由器（Per-router）控制平面" class="headerlink" title="传统方式：每一路由器（Per-router）控制平面"></a>传统方式：每一路由器（Per-router）控制平面</h4><p>在传统方式下，每个路由器既实现了控制平面的功能，又实现了数据平面的功能，路由器上面都有一个路由选择组件，用于与其他路由器中的路由选择组件同行，以计算其转发表的值。</p>
<p>传统方式下IP路由器把控制平面和数据平面在一个设备上一起实现，每个路由器独立的实现控制平面和数据平面的功能，所以控制平面和数据平面都是分布式的去做，到来的每个分组，按照控制平面算出来的路由表，IP协议对到来的分组做转发，转发的依据就是IP分组当中的目标IP地址 </p>
<p>在传统方式下控制平面和数据平面高度耦合，并且计算路由表是分布式的完成，带来的问题是，要改路由器的运行逻辑非常困难</p>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672472290886.png" alt="1672472290886"></p>
<h5 id="传统方式下路由和转发的相互作用"><a href="#传统方式下路由和转发的相互作用" class="headerlink" title="传统方式下路由和转发的相互作用"></a>传统方式下路由和转发的相互作用</h5><p>路由表是控制平面和数据平面的粘合剂，控制平面算出来路由表，IP协议根据路由表对到来的分组做匹配，然后进行转发，根据IP数据报目标IP地址进行转发</p>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672472399552.png" alt="1672472399552"></p>
<h4 id="SDN方式：逻辑集中的控制平面【软件定义网络】"><a href="#SDN方式：逻辑集中的控制平面【软件定义网络】" class="headerlink" title="SDN方式：逻辑集中的控制平面【软件定义网络】"></a>SDN方式：逻辑集中的控制平面【软件定义网络】</h4><p>在SDN方式下控制平面的功能是集中在一个服务器上去做的，这个服务器也叫远程控制器、网络操作系统，网络操作系统实现了控制平面的功能，通过<strong>南向接口</strong>跟每一个分组交换设备的<strong>CA（控制代理）</strong>打交道，然后控制代理上报他们的状况，<strong>控制器把流表算出来</strong>，通过南向接口交给每一个分组交换设备，<strong>分组交换设备把流表进行装载</strong>，对到来的分组做多字段的匹配，匹配完了之后按照匹配完流表的表项所对应的动作，对分组做动作</p>
<p>因此实现网络设备的行为逻辑只需要改变流表就可以了，控制器上的网络应用可以按照不同方式来算出流表，分组交换设备按照流表对到来的分组做相应的处理。这样的话，网络设备要改变它的行为逻辑仅仅改变控制器，在控制器上实现不同的网络应用就行了。IP分组的传统方式仅仅相当于它的特例。 </p>
<blockquote>
<p>在SDN中控制平面是集中式的，网络可编程，SDN由一个不同的（通常是远程的）控制器与本地控制代理（CAs）交互</p>
</blockquote>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672833168742.png" alt="1672833168742"></p>
<h5 id="SDN的主要思路"><a href="#SDN的主要思路" class="headerlink" title="SDN的主要思路"></a>SDN的主要思路</h5><p>SDN的主要思路就是将网络设备数据平面和控制平面分离，把原来的数据平面（路由器、交换机等）<strong>抽象</strong>成按照流表（由控制平面设置的控制逻辑）进行PDU（帧、分组）的动作（包括转发、丢弃、拷贝、泛洪、阻 塞），<strong>统一化</strong>设备功能让SDN交换机（分组交换机），执行控制逻辑。并将控制平面（网络应用）分离、集中起来，负责计算和下发控制逻辑（流表）</p>
<p><strong>SDN的主要思路就是将原来分布式的控制平面功能做集中式的处理</strong></p>
<h3 id="网络服务模型"><a href="#网络服务模型" class="headerlink" title="网络服务模型"></a>网络服务模型</h3><h4 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h4><p>对于单个数据报的服务来说网络为从发送方主机到接收方主机传输数据报的“通道” 提供可靠传送、延迟保证的服务模型</p>
<p>对于数据报流的服务来说，网络为从发送方主机到接收方主机传输数据报的“通道” 提供保序数据报传送并保证流的最小带宽及分组之间的延迟差（jitter）</p>
<p>当具体的指标等于相应值的时候，这个网络向上层提供的服务就可以用服务模型来表示</p>
<h4 id="连接建立"><a href="#连接建立" class="headerlink" title="连接建立"></a>连接建立</h4><p>连接的建立在某些网络架构中（如ATM，frame relay，X.25）是第三个重要的功能【除路由和转发外的第三个重要功能。具体到TCP&#x2F;IP的网络，IP网络向上层提供的服务，IP协议实现了数据层面的转发的功能，而一些路由选择协议实体的实现，实现了控制平面的路由功能，控制平面是全局的。控制平面的功能体现在最后的结果路由表，路由表交给IP协议，IP协议拿路由表对到来的分组进行匹配、转发。所以路由表是控制平面和数据平面的粘合剂。IP的网络没有连接建立的功能，对于某些网络有连接建立的功能，如ATM】</p>
<blockquote>
<p>简而言之连接建立就是指在分组传输之前，在两个主机之间，在通过一些路由器所构成的路径上建立一个网络层连接。（涉及到路由器）</p>
</blockquote>
<p><strong>网络层和传输层连接服务区别</strong>：</p>
<ul>
<li><p><strong>网络层</strong></p>
<p>在2个主机之间，涉及到路径上的一些路由器【不仅体现在端主机之上，而且体现在中间路径上所经过的所有交换节点】</p>
</li>
<li><p><strong>传输层</strong></p>
<p>在2个进程之间，很可能只体现在端系统上（TCP连接）【传输层的连接仅仅体现在端系统之上，所以说他叫面向连接，而网络层主机和主机之间的连接称之为有连接】</p>
</li>
</ul>
<h4 id="网络服务模型-1"><a href="#网络服务模型-1" class="headerlink" title="网络服务模型"></a>网络服务模型</h4><p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672473320459.png" alt="1672473320459"></p>
<h2 id="路由器工作原理"><a href="#路由器工作原理" class="headerlink" title="路由器工作原理"></a>路由器工作原理</h2><h3 id="路由器结构概况"><a href="#路由器结构概况" class="headerlink" title="路由器结构概况"></a>路由器结构概况</h3><p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1707986970161.png" alt="1707986970161"></p>
<center>高层面（非常简化的）通用路由器体系架构</center>

<ul>
<li><strong>路由：</strong>运行路由选择算法 &#x2F; 协议（RIP, OSPF, BGP）- 生成路由表</li>
<li><strong>转发：</strong>从输入到输出链路交换数据报 - 根据路由表进行分组的转发</li>
</ul>
<p>路由器的组成包括以下几个方面：<strong>输入端口</strong>、<strong>输出端口</strong>、以及负责把输入端口和输出端口连接在一起的<strong>交换机（Fabric）</strong></p>
<ul>
<li><strong>输入端口：</strong>在路由器中执行终结入物理链路的物理层功能，与位于入链路远端的数据链路层交互，执行数据链路层功能，之后执行查找&#x2F;转发&#x2F;排队</li>
<li><strong>交换结构：</strong>交换结构将路由器的输入端口连接到它的输出端口，这个交换结构完全包含在路由器之中，即它是一个网络路由器中的网络</li>
<li><strong>输出端口：</strong>输出端口存储从交换结构接收的分组，并通过执行必要的链路层和物理层功能在输出链路上传输这些分组。当一条链路是双向的时（即承载两个方向的流量），输出端口通常与该链路的输入端口成对出现在同一线路卡上。</li>
<li><strong>路由选择处理器：</strong>路由选择处理器执行控制平面的功能。在传统的路由器中，它执行路由选择协议，维护路由选择表与关联链路状态信息，并为该路由器计算转发表。在SDN路由器中，路由选择处理器（在其他活动中）负责与远程控制器同行，目的是接收由远程控制器计算的转发表象，并在该路由器的输入端口安装这些表象，路由器选择处理器还执行网络管理功能。</li>
</ul>
<h4 id="输入端口功能"><a href="#输入端口功能" class="headerlink" title="输入端口功能"></a>输入端口功能</h4><p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1708052082136.png" alt="1672473994522"></p>
<ul>
<li><p><strong>线路端接：</strong>物理层的 line termination（链路终端）完成链路上的物理信号转化成数字信号的功能，转完之后交给数据链路层</p>
</li>
<li><p><strong>数据链路处理：</strong>执行数据链路层功能（链路层协议动作、解封装）</p>
</li>
<li><p><strong>查找&#x2F;转发&#x2F;排队：</strong>通过查询转发表决定路由器的输出端口，到达的分组通过路由器的交换结构转发到输出端口，控制分组（如携带路由选择协议信息的分组）从输入端口<strong>转发</strong>到路由选择处理器。</p>
<blockquote>
<p>这里的端口指的是路由器的物理输入和输出接口</p>
</blockquote>
<ul>
<li><strong>基于目标的转发：</strong>仅仅依赖于IP数据报的目标IP地址（传统方法）</li>
<li><strong>通用转发：</strong>基于头部字段的任意集合进行转发</li>
</ul>
</li>
</ul>
<h5 id="基于目标的转发"><a href="#基于目标的转发" class="headerlink" title="基于目标的转发"></a>基于目标的转发</h5><p>路由器根据转发表中的地址划分，与数据包的前缀进行匹配，以此来确定通过哪条链路进行转发</p>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672473793084.png" alt="1672473793084"></p>
<p>如果地址范围没有划分的特别规整可能会影响用户上网效率，不利于局域网网络的稳定运行。</p>
<h6 id="最长前缀匹配"><a href="#最长前缀匹配" class="headerlink" title="最长前缀匹配"></a>最长前缀匹配</h6><p>longest prefix matching：当给定目标地址查找转发表时，采用最长地址前缀匹配的目标地址表项</p>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672473893265.png" alt="1672473893265"></p>
<p>最长前缀匹配：在路由器中经常采用TCAMs（ternary content addressable memories）硬件来完成</p>
<ul>
<li>内容可寻址：将地址交给TCAM，它可以在一个时钟周期内检索出地址，不管表空间有多大【通过匹配IP地址的最长前缀对所有IP地址进行分组】</li>
<li>Cisco Catalyst系列路由器：在TCAM中可以存储多达1百万条路由表项</li>
</ul>
<h5 id="输入端口缓存"><a href="#输入端口缓存" class="headerlink" title="输入端口缓存"></a>输入端口缓存</h5><p>当交换机构的速率小于输入端口的汇聚速率时，在输入端口可能要排队，同时由于排队延迟或输入缓存溢出容易造成分组丢失</p>
<ul>
<li>Head-of-Line（HOL）blocking：排在队头的数据报阻止了队列中其他数据报向前移动</li>
</ul>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/9fb86f3e6cab4a9a837dafe9786fdf67.png"></p>
<p>有些分组在路由器中传着传着会丢就是因为缓冲区溢出了，可能发生在输入端口，也可能发生在输出端口</p>
<blockquote>
<p>输入端口缓冲区的主要目的是为了匹配瞬间的输入速率和输出速率的不一致性，防止头端阻塞</p>
</blockquote>
<h4 id="交换结构"><a href="#交换结构" class="headerlink" title="交换结构"></a>交换结构</h4><p>Fabric如何输入端口转到输出端口，有三种常见的Fabric的工作方式：基于memory、基于bus、基于crossbar</p>
<ul>
<li><p>将分组从输入缓冲区传输到合适的输出端口</p>
</li>
<li><p>交换速率：分组可以按照该速率从输入传输到输出</p>
<ul>
<li><p>运行速度经常是输入&#x2F;输出链路速率的若干倍</p>
</li>
<li><p>N个输入端口：交换机构的交换速度是输入线路速度的N倍比较理想，才不会成为瓶颈</p>
<p>不管是哪种交换结构，他的交换速率都要 ≥ N倍输入速度（N是输入端口数量）一般来说分组交换叫ppm，package per minute，每分钟交换分组的数量，假设接了3个输入输出端口，进来的数量是1000ppm，那么交换速率应该3000以上，否则本身Fabric就会成为瓶颈</p>
</li>
</ul>
</li>
</ul>
<h5 id="3种典型的交换机构"><a href="#3种典型的交换机构" class="headerlink" title="3种典型的交换机构"></a>3种典型的交换机构</h5><p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672474501252.png" alt="1672474501252"></p>
<h6 id="通过内存交换【基于memory】"><a href="#通过内存交换【基于memory】" class="headerlink" title="通过内存交换【基于memory】"></a>通过内存交换【基于memory】</h6><p>第一代路由器采用这种交换机构</p>
<p>PC机、通用计算机通过软件的方式来实现路由，然后两端插入网卡，通过网卡收来一个分组，通过系统bus（系统总线）把分组交给路由软件，路由软件匹配路由表，然后决定通过哪个网卡发出去，然后网卡把分组封装成帧发出去。</p>
<p>内存交换具有以下几种特点：</p>
<ul>
<li><p>在CPU直接控制下的交换，采用传统的计算机</p>
</li>
<li><p>分组被拷贝到系统内存，CPU从分组的头部提取出目标地址，查找转发表，找到对应的输出端口，拷贝到输出端口</p>
</li>
<li><p>转发速率被内存的带宽限制（数据报通过BUS两遍）</p>
<p>由于package要过系统总线两次，所以系统总线本身就会成为Fabric交换速度的瓶颈，因此它的带宽每分钟交换转发分组的速率不是那么高</p>
</li>
<li><p>一次只能转发一个分组</p>
</li>
</ul>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672474880299.png" alt="1672474880299"></p>
<h6 id="通过总线交换【不是系统总线】"><a href="#通过总线交换【不是系统总线】" class="headerlink" title="通过总线交换【不是系统总线】"></a>通过总线交换【不是系统总线】</h6><p>第一代路由器采用这种交换机构</p>
<p>输入端口输出端口挂在Fabric，Fabric体现形式就是bus，分组通过bus所有的输出端口都能读到，分组通过bus的时候要加上输出端口的地址，所有输出端口都能拿到，拿到之后匹配一下，如果是我的就收下然后转走，不是就丢掉</p>
<p>这种交换结构屏蔽了基于memory的路由器的问题——经过system bus两次；而基于bus的经过总线只有1次，所以交换速率要比基于memory的交换速率大很多</p>
<ul>
<li>数据报通过共享总线，从输入端口转发到输出端口</li>
<li>总线竞争：交换速度受限于总线带宽</li>
<li>1次处理一个分组</li>
<li>1 Gbps bus, Cisco 1900; 32 Gbps bus, Cisco 5600; 对于接入或企业级路由器，速度足够（但不适合区域或骨干网络）</li>
</ul>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672475267384.png" alt="1672475267384"></p>
<h6 id="通过互联网络（crossbar等）的交换"><a href="#通过互联网络（crossbar等）的交换" class="headerlink" title="通过互联网络（crossbar等）的交换"></a>通过互联网络（crossbar等）的交换</h6><ul>
<li>同时并发转发多个分组，克服总线带宽限制</li>
<li>Banyan（榕树）网络，crossbar（纵横）和其它的互联网络被开发，将多个处理器连接成多处理器，A向Y转发的同时B也可以向Z转发</li>
<li>当分组从端口A到达，转给端口y；控制器短接相应的两个总线，所以他的交换速度要比基于bus的快很多，n倍于它</li>
<li>高级设计：将数据报分片为固定长度的信元，通过交换网络交换，把数据报分成定长的之后还会还原会原来的数据报</li>
<li>Cisco12000：以60Gbps的交换速率通过互联网络</li>
</ul>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672475396379.png" alt="1672475396379"></p>
<h4 id="输出端口"><a href="#输出端口" class="headerlink" title="输出端口"></a>输出端口</h4><p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672550552130.png" alt="1672550552130"></p>
<ul>
<li>当数据报从交换机构的到达速度比传输速率快就需要输出端口缓存</li>
<li>由调度规则选择排队的数据报进行传输</li>
</ul>
<p>优先权调度并不是采用先到先传，而是根据调度机制来选择具体传的分组</p>
<h5 id="输出端口排队"><a href="#输出端口排队" class="headerlink" title="输出端口排队"></a>输出端口排队</h5><p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672550674894.png" alt="1672550674894"></p>
<ul>
<li>假设交换速率R_switch是R_line的N倍（N：输入端口的数量）</li>
<li>当多个输入端口同时向输出端口发送时，缓冲该分组（当通过交换网络到达的速率超过输出速率则缓存）</li>
<li>排队带来延迟，由于输出端口缓存溢出则丢弃数据报！</li>
</ul>
<h5 id="输出端口缓存大小"><a href="#输出端口缓存大小" class="headerlink" title="输出端口缓存大小"></a>输出端口缓存大小</h5><ul>
<li><p>RFC 3439 拇指规则（经验性规则）：平均缓存 &#x3D; 典型的RTT（例如：250ms）倍于链路容量C</p>
<ul>
<li>e.g. , C &#x3D; 10 Gbps link</li>
<li>250ms * 10Gbps &#x3D; 2.5 Gbit buffer</li>
</ul>
</li>
<li><p>最近的一些推荐：有N（非常大）个流，缓存大小等于</p>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672550779021.png" alt="1672550779021"></p>
</li>
</ul>
<h4 id="调度机制"><a href="#调度机制" class="headerlink" title="调度机制"></a>调度机制</h4><ul>
<li><strong>调度：</strong>选择下一个要通过链路传输的分组</li>
<li><strong>FIFO（first in first out） scheduling：</strong>按照分组到来的次序发送</li>
<li><strong>丢弃策略：</strong>如果分组到达一个满的队列，哪个分组将会被抛弃？<ul>
<li>tail drop：丢弃刚到达的分组</li>
<li>priority：根据优先权丢失&#x2F;移除分组</li>
<li>random：随机地丢弃&#x2F;移除</li>
</ul>
</li>
</ul>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672550876269.png" alt="1672550876269"></p>
<h5 id="调度策略：优先权"><a href="#调度策略：优先权" class="headerlink" title="调度策略：优先权"></a>调度策略：优先权</h5><p><em>优先权调度：</em>发送最高优先权的分组</p>
<ul>
<li>多类，不同类别有不同的优先权<ul>
<li>类别可能依赖于标记或者其他的头部字段，e.g. IP source&#x2F;dest, port numbers, ds, etc.</li>
<li>先传高优先级的队列中的分组，除非没有</li>
<li>高（低）优先权中的分组传输次序：FIFO</li>
</ul>
</li>
</ul>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672550934694.png" alt="1672550934694"></p>
<h5 id="调度策略：其他的"><a href="#调度策略：其他的" class="headerlink" title="调度策略：其他的"></a>调度策略：其他的</h5><h6 id="Round-Robin（RR）scheduling"><a href="#Round-Robin（RR）scheduling" class="headerlink" title="Round Robin（RR）scheduling"></a>Round Robin（RR）scheduling</h6><ul>
<li>多类</li>
<li>循环扫描不同类型的队列，发送完一类的一个分组，再发送下一个类的一个分组，循环所有类</li>
</ul>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/323eb8fabc9e437f9866f83d12a7b853.png"></p>
<h6 id="Weighted-Fair-Queuing（WEQ）"><a href="#Weighted-Fair-Queuing（WEQ）" class="headerlink" title="Weighted Fair Queuing（WEQ）"></a>Weighted Fair Queuing（WEQ）</h6><ul>
<li>一般化的Round Robin</li>
<li>在一段时间内，每个队列得到的服务时间是：W_i &#x2F; (XIGMA(W_i)) * t，和权重成正比</li>
<li>每个类在每一个循环中获得不同权重的服务量</li>
</ul>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/c85ee960de49456f9bc71a2e8eca1a71.png"></p>
<h2 id="IP-Internet-Protocol"><a href="#IP-Internet-Protocol" class="headerlink" title="IP - Internet Protocol"></a>IP - Internet Protocol</h2><h3 id="概念-1"><a href="#概念-1" class="headerlink" title="概念"></a>概念</h3><p>IP是Internet Protocol 的简称，IP 协议处于 TCP&#x2F;IP 五层模型的网络层，它的主要功能是数据的传输和路由选择。 </p>
<p>IP 协议是 <strong>TCP&#x2F;IP 协议族</strong> 中的核心协议。 <strong>IP 协议</strong>根据数据**包(Packet)**中的 <strong>IP 地址</strong>， 为上层协议提供一种 <strong>无连接(Connectionless)<strong>，</strong>尽力而为(Best-effort Delivery)</strong> 的数据传输功能。</p>
<ul>
<li><p><strong>尽力而为的交付(Best-effort Delivery)</strong> </p>
<p>用于描述既不保证数据成功交付, 也不保证数据交付满足某种服务质量的网络服务。在尽力交付的网络中，所有的用户获得的都是尽力交互的服务，这就意味着他们传输数据的比特率、延迟和包丢失受当前网络的流量负载情况的影响而变化。 </p>
</li>
<li><p><strong>无连接通信(Connectionless Communication)</strong>  </p>
<p>一种数据包交换网络的数据传输方法。在该网络中, 每个数据单元是根据其<strong>携带的信息</strong>独立寻址和路由，而不是像面向连接通信那样预先设置固定的数据通道。</p>
</li>
</ul>
<h3 id="IP地址组成"><a href="#IP地址组成" class="headerlink" title="IP地址组成"></a>IP地址组成</h3><p>IP地址由4部分数字组成，每部分数字对应于8位二进制数字，各部分之间用小数点分开，这是点分二进制，如果换算为十进制我们称为点分十进制。</p>
<p>每个IP地址由两部分组成<strong>网络地址（NetID）</strong>和<strong>主机地址（HostID）</strong>。网络地址表示其属于互联网中的哪一个网络，而主机地址则表示其属于该网络中的哪一台主机。</p>
<h3 id="IP地址分类"><a href="#IP地址分类" class="headerlink" title="IP地址分类"></a>IP地址分类</h3><p>IP地址一般可以分为分为A、B、C三类常规地址及D、E两类特殊地址。 </p>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/34f79aeccecc8a8d4778838ecd55278b.png"></p>
<h4 id="A类地址"><a href="#A类地址" class="headerlink" title="A类地址"></a>A类地址</h4><p>A类地址：范围从0-127，0是保留的并且表示所有IP地址，而127也是保留的地址，并且是用于测试回环用的，因此A类地址的范围其实是从1-126之间。</p>
<p>如 64.32.16.8，第一段号码为网络号码，剩下的三段号码为本地计算机的号码。转换为二进制来说，一个A类IP地址由8字节的网络地址和24字节的主机地址组成，网络地址的最高位必须是0，可用A类网络有126个，每个网络能容纳一亿多台主机——2的24次方-2主机数。</p>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/9c6f7290ee0a51ff589205eba5242aaa.png"></p>
<h4 id="B类地址"><a href="#B类地址" class="headerlink" title="B类地址"></a>B类地址</h4><p>B类地址：范围从128-191，如176.168.128.1，第一和第二段号码为网络号码，剩下的两段号码为本地计算机的号码，转换为二进制来说，一个B类IP地址由16个字节的网络地址和16个字节的主机地址组成，网络地址最高位必须是10。可用的B类网络有16382个，每个网路能容纳6万多个主机——（2的16次方-2）。</p>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/93a5a3bde247573aa72cf73226d7f8b2.png"></p>
<h4 id="C类地址"><a href="#C类地址" class="headerlink" title="C类地址"></a>C类地址</h4><p>C类地址：范围从192-223，如192.168.1.1，第一、第二、第三段号码为网络号码，剩下的最后一段号码为本地计算机的号码，转换为二进制来说，一个C类IP地址由24字节的网络地址和8字节的主机地址组成，网络地址的最高位必须是110。C类网络可达209万多个，每个网络能容纳254个主机——（2的8次方-2）。<br><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/3c4accfa49e3e6b6b0324e58a9abc638.png"></p>
<h4 id="D类地址"><a href="#D类地址" class="headerlink" title="D类地址"></a>D类地址</h4><p>D类地址：范围从224-239，D类IP地址以1110开始，它是一个专门保留的地址，它并不指向特定的网络，目前这一类地址被用在多点广播（Multicast）中。多点广播地址用来一次寻址一组计算机，它表示共享同一协议的一组计算机。 </p>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/f7727d7e80ffcc506bc25034cdde2226.png"></p>
<h4 id="E类地址"><a href="#E类地址" class="headerlink" title="E类地址"></a>E类地址</h4><p>E类地址：范围从240-254，以11110开始，为将来使用保留。全0（0.0.0.0）地址对应于当前主机。全1的IP地址（255.255.255.255）是当前子网的广播地址。 </p>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/64c23f4d662576f1d3352a398558988d.png"></p>
<h4 id="数轴表示各类型地址取值范围"><a href="#数轴表示各类型地址取值范围" class="headerlink" title="数轴表示各类型地址取值范围"></a>数轴表示各类型地址取值范围</h4><p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/2c6c5341518abdc87ef881a14253ed8c.png"></p>
<p><strong>只有A,B,C有网络号和主机号之分，D类地址和E类地址没有划分网络号和主机号。A类地址第一组数字为1~126，数字0和127不作为A类地址</strong> </p>
<h3 id="特殊IP地址"><a href="#特殊IP地址" class="headerlink" title="特殊IP地址"></a>特殊IP地址</h3><h4 id="全1地址"><a href="#全1地址" class="headerlink" title="全1地址"></a>全1地址</h4><p>如：255.255.255.255</p>
<p>该IP地址指的是受限的广播地址。受限广播地址与一般广播地址（直接广播地址）的区别在于，受限广播地址只能用于本地网络，路由器不会转发以受限广播地址为目的地址的分组；一般广播地址既可在本地广播，也可跨网段广播。例如：主机192.168.1.1&#x2F;30上的直接广播数据包后，另外一个网段192.168.1.5&#x2F;30也能收到该数据报；若发送受限广播数据报，则不能收到。</p>
<p>注：一般的广播地址（直接广播地址）能够通过某些路由器（当然不是所有的路由器），而受限的广播地址不能通过路由器。</p>
<h4 id="全0地址"><a href="#全0地址" class="headerlink" title="全0地址"></a>全0地址</h4><p>如：0.0.0.0</p>
<p>常用于寻找自己的IP地址，例如在我们的RARP，BOOTP和DHCP协议中，若某个未知IP地址的无盘机想要知道自己的IP地址，它就以255.255.255.255为目的地址，向本地范围（具体而言是被各个路由器屏蔽的范围内）的服务器发送IP请求分组。</p>
<h4 id="回环地址"><a href="#回环地址" class="headerlink" title="回环地址"></a>回环地址</h4><p>127.0.0.0&#x2F;8被用作回环地址，回环地址表示本机的地址，常用于对本机的测试，用的最多的是127.0.0.1。</p>
<h4 id="A、B、C类私有地址"><a href="#A、B、C类私有地址" class="headerlink" title="A、B、C类私有地址"></a>A、B、C类私有地址</h4><p>私有地址(private address)也叫专用地址，它们不会在全球使用，只具有本地意义。</p>
<p>A类私有地址：10.0.0.0&#x2F;8，范围是：10.0.0.0~10.255.255.255</p>
<p>B类私有地址：172.16.0.0&#x2F;12，范围是：172.16.0.0~172.31.255.255</p>
<p>C类私有地址：192.168.0.0&#x2F;16，范围是：192.168.0.0~192.168.255.255</p>
<h3 id="IP数据报格式"><a href="#IP数据报格式" class="headerlink" title="IP数据报格式"></a>IP数据报格式</h3><p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672642245915.png" alt="1672642245915"></p>
<ul>
<li><strong>版本(Version)：</strong>4位。<strong>IPv4</strong> 是 4， <strong>IPv6</strong> 是 6。</li>
<li><strong>Internet 首部长度(Internet Header Length, IHL)：</strong>4位。<strong>IPv4</strong> 的首部长度(单位: 32位字)。</li>
<li><strong>服务类型(Type of Service, ToS)：</strong>8位。现在分为用于支持不同服务的 <strong>区分服务(Differentiated Services, DiffServ)</strong> 字段(前 6 位) 和用于拥塞控制的<strong>显示拥塞控制(Explicit Congestion Notification , ECN)</strong> 字段(后 2 位)。</li>
<li><strong>总长度(Total Length)：</strong>16位。<strong>IP 数据包</strong>的<strong>首部</strong>和数据的总长度(单位：字节)。</li>
<li><strong>标识(Identification)：</strong>16位。对<strong>数据包</strong>进行编号，同一个的上层 <strong>PDU</strong> 分片得到的各个 <strong>IP 数据包</strong> 编号相同。<strong>标识</strong>字段用于分片后的重组。</li>
<li><strong>标志(Flag)<strong>：3位。最低位记为 <strong>MF(More Fragment)<strong>， 当 <strong>MF &#x3D; 1</strong> 时，表示后面还有与当前</strong>数据包</strong>分片自同一上层 <strong>PDU</strong> 的</strong>数据包</strong>。中间为记为 <strong>DF(Don’t Fragment)</strong>, 当 <strong>DF &#x3D; 0</strong> 时，才允许分片。最高位保留，必须置为 0。</li>
<li><strong>片偏移(Fragment Offset)：</strong>13位。上层 <strong>PDU</strong> 分片后的 <strong>IP 数据包</strong> 在原 <strong>PDU</strong> 中的相对偏移位置。偏移单位是 8 字节。也就是说，<strong>每个分片的长度一定是 8 字节(64 位) 的整数倍</strong>。</li>
<li><strong>生存时间(Time To Live, TTL)：</strong>8位。该 <strong>数据包</strong> 最多经过的路由器个数。每经过一个<strong>路由器</strong>，该值减一。当 <strong>TTL</strong> 为 0 时，路由器丢弃该 <strong>数据包</strong>。</li>
<li><strong>协议(Protocol)：</strong>8位。指出当前<strong>数据包</strong>携带的数据是使用哪种协议。如，<strong>ICMP</strong> 是 1， <strong>IGMP</strong> 是 2， <strong>TCP</strong> 是 6， <strong>UDP</strong> 是 17。</li>
<li><strong>首部校验和(Header Checksum)：</strong>16位。简单校验<strong>数据包</strong>首部是否出差错。如果出错，则直接丢弃。<strong>每经过一个路由器都会计算一下首部校验和</strong>，因为<strong>首部</strong>的 <strong>TTL</strong> 等字段可能会发生改变。</li>
<li><strong>源地址(Source address)：</strong>32 位。</li>
<li><strong>目标地址(Destination address)：</strong>32位。</li>
<li><strong>选项(Options)：</strong>不常用。</li>
</ul>
<h3 id="分片-Fragment"><a href="#分片-Fragment" class="headerlink" title="分片(Fragment)"></a>分片(Fragment)</h3><p>网络层接收到上层协议的<strong>协议数据单元(Protocol Data Unit, PDU)</strong> 后，会在前面加上 IP 协议首部，封装成 IP 数据包。</p>
<p>由于数据链路层有效载荷的<strong>最大传输单元(Maximum Transmission Unit, MTU)</strong> 限制，如果上层协议的 PDU 加上 IP 首部长度大于 MTU，网络层会将上层协议的 PDU 拆分给多个 IP 数据包，这个操作被称之为**分片(Fragment)**。</p>
<p><strong>IP 协议</strong> 本身是不保证数据顺序传输，因此需要分片后的 IP 首部 能提供 IP 数据包 的相关字段来复原上层协议 PDU。这些字段包括：</p>
<ul>
<li>**标识(Identification)**： 用于标识哪些分片属于同一个上层 PDU 的标识(Identification)。</li>
<li>**标记(Flag)**：用于判断当前分片后面是否还有分片以及是否不能分片的</li>
<li>**片偏移(Fragment Offset)**：用于记录当前分片在原上层 PDU 中的相对位置。</li>
</ul>
<p><strong>最大传输单元（MTU）</strong> 是用八位字节指定的可以用在基于包或帧传输的网络，如因特网，传输的最大包或帧的大小。在 Windows 95 中， 默认的 MTU 设为 1500 字节，部分是因为这是以太网的标准 MTU。<strong><strong>因特网</strong></strong>实际上的 MTU 是 576 字节， 但是 ISP 通常建议使用 1500 字节。 </p>
<h3 id="IP编址"><a href="#IP编址" class="headerlink" title="IP编址"></a>IP编址</h3><p>主机或路由器通过IP地址进行编址，IP地址是一个32位的标示，一个IP地址和路由器或主机的接口关联</p>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672643000577.png" alt="1672643000577"></p>
<h3 id="子网-Subnets"><a href="#子网-Subnets" class="headerlink" title="子网(Subnets)"></a>子网(Subnets)</h3><p>IP地址分为子网部分（高位bits）和主机部分（低位bits）</p>
<p>子网是指一个区域网内的节点（主机或路由器）它们的IP地址的高位部分相同，这些节点构成的网络的一部分叫做子网，子网中各节点相互通信无需路由器接入，子网内各主机可以在物理上相互直接到达（一跳可达）</p>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672643398913.png" alt="1672643398913"></p>
<h3 id="子网掩码"><a href="#子网掩码" class="headerlink" title="子网掩码"></a>子网掩码</h3><p>IP地址是以网络号和主机号来标示网络上的主机的，我们把网络号相同的主机称之为本地网络，网络号不相同的主机称之为远程网络主机，本地网络中的主机可以直接相互通信；远程网络中的主机要相互通信必须通过本地网关（Gateway）来传递转发数据。</p>
<h4 id="子网掩码的概念及作用"><a href="#子网掩码的概念及作用" class="headerlink" title="子网掩码的概念及作用"></a>子网掩码的概念及作用</h4><h4 id="概念-2"><a href="#概念-2" class="headerlink" title="概念"></a>概念</h4><p>子网掩码（Subnet Mask）又叫网络掩码、地址掩码，必须结合IP地址一起对应使用。<strong>子网掩码是用于给IP地址划分网络地址与主机地址的</strong>，和子网掩码1对应的IP地址，代表网络位；和子网掩码0对应的IP地址，代表主机位，只有通过子网掩码，才能表明一台主机所在的子网与其他子网的关系，使网络正常工作。</p>
<p>子网掩码和IP地址做“与”运算，分离出IP地址中的网络地址和主机地址，用于判断该IP地址是在本地网络上，还是在远程网络网上。子网中只要1是连续的，就是合理子网掩码。子网掩码还用于将网络进一步划分为若干子网，以避免主机过多而拥堵或过少而IP浪费。</p>
<h4 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h4><p><strong>子网掩码是标志两个IP地址是否同属于一个子网的</strong>，也是32位二进制地址，其每一个为1代表该位是网络位，为0代表主机位。它和IP地址一样也是使用点式十进制来表示的。<strong>如果两个IP地址在子网掩码的按位与的计算下所得结果相同，即表明它们共属于同一子网中。</strong> </p>
<blockquote>
<p>结论：子网掩码就是用来遮掩IP地址并划分网段的工具，根据遮掩的位数不同来划分不同的网段。</p>
</blockquote>
<h4 id="子网掩码的组成"><a href="#子网掩码的组成" class="headerlink" title="子网掩码的组成"></a>子网掩码的组成</h4><p>同IP地址一样，子网掩码是由长度为32位二进制数组成的一个地址。子网掩码32位与IP地址32位相对应，IP地址如果某位是网络地址，则子网掩码为1，否则为0。</p>
<blockquote>
<p>注意：左边连续的 1 的个数代表网络号的长度，（使用时必须是连续的，理论上也可以不连续），右边连续的 0 的个数代表主机号的长度。 </p>
</blockquote>
<h4 id="子网掩码的表示方法"><a href="#子网掩码的表示方法" class="headerlink" title="子网掩码的表示方法"></a>子网掩码的表示方法</h4><p>子网掩码共有点分十进制表示法和CIDR斜线技法两种表示方法</p>
<h4 id="点分十进制表示法"><a href="#点分十进制表示法" class="headerlink" title="点分十进制表示法"></a>点分十进制表示法</h4><p>二进制转换十进制，每8位用点号隔开例如：</p>
<p>子网掩码二进制11111111.11111111.11111111.00000000，表示为255.255.255.0</p>
<h4 id="CIDR斜线记法"><a href="#CIDR斜线记法" class="headerlink" title="CIDR斜线记法"></a>CIDR斜线记法</h4><p>IP地址&#x2F;n</p>
<ul>
<li><p><strong>例1：</strong></p>
<p>192.168.1.100&#x2F;24，其子网掩码表示为255.255.255.0</p>
<p>二进制表示为11111111.11111111.11111111.00000000</p>
</li>
<li><p><strong>例2：</strong></p>
<p>172.16.198.12&#x2F;20，其子网掩码表示为255.255.240.0</p>
<p>二进制表示为11111111.11111111.11110000.00000000</p>
</li>
</ul>
<p>例1中共有24个１，例2中共有20个１，所以n是这么来的。运营商ISP常用这样的方法给客户分配IP地址。</p>
<blockquote>
<p>需要注意的是 n为 1到 32 的数字，表示子网掩码中网络号的长度，通过 n 的个数确定子网的主机数 &#x3D; 2^(32-n) - 2（-2的原因：主机位全为0时表示本网络的网络地址，主机位全为1时表示本网络的广播地址，这是两个特殊地址）。</p>
</blockquote>
<h4 id="子网掩码的分类"><a href="#子网掩码的分类" class="headerlink" title="子网掩码的分类"></a>子网掩码的分类</h4><h4 id="缺省子网掩码"><a href="#缺省子网掩码" class="headerlink" title="缺省子网掩码"></a>缺省子网掩码</h4><p>也叫默认子网掩码，即未划分子网，对应的网络号的位都置 1 ，主机号都置 0 。</p>
<p>未做子网划分的IP地址：网络号＋主机号</p>
<p>A类网络缺省子网掩码： 255.0.0.0，用CIDR表示为&#x2F;8</p>
<p>B类网络缺省子网掩码： 255.255.0.0，用CIDR表示为&#x2F;16</p>
<p>C类网络缺省子网掩码： 255.255.255.0，用CIDR表示为&#x2F;24</p>
<h4 id="自定义子网掩码"><a href="#自定义子网掩码" class="headerlink" title="自定义子网掩码"></a>自定义子网掩码</h4><p>将一个网络划分子网后，把原本的主机号位置的一部分给了子网号，余下的才是给了子网的主机号。其形式如下：</p>
<p>做子网划分后的IP地址：网络号＋子网号＋子网主机号</p>
<p>例如：192.168.1.100&#x2F;25，其子网掩码表示：255.255.255.128</p>
<p>意思就是将192.168.1.0这个网段的主机位的最高1位划分为了子网。</p>
<h3 id="CIDR与VLSM"><a href="#CIDR与VLSM" class="headerlink" title="CIDR与VLSM"></a>CIDR与VLSM</h3><h4 id="有类和无类网络，超网和子网"><a href="#有类和无类网络，超网和子网" class="headerlink" title="有类和无类网络，超网和子网"></a>有类和无类网络，超网和子网</h4><p>有类网络：也叫主类网络或标准网络，就是指把IP地址能归结到的A类、B类、C类IP，使用的是标准的默认子网掩码。</p>
<ul>
<li><strong>无类网络</strong>：相对于有类网络，无类网络IP地址的掩码是变长的。在有类网络的基础上，拿出一部分主机ID作为子网ID。</li>
<li><strong>超网</strong>：把多个小网络组合成一个大网络，称为超网（SuperNetting）</li>
<li><strong>子网</strong>：有类网络划分成更小后的网络，称为子网（Subnet）</li>
</ul>
<h4 id="CIDR无类别域间路由"><a href="#CIDR无类别域间路由" class="headerlink" title="CIDR无类别域间路由"></a>CIDR无类别域间路由</h4><p>CIDR（Classless Inter-Domain Routing，<strong>无类别域间路由</strong>）本质是消除了传统的A类、B类和C类地址以及划分子网的概念，将多个地址块聚合在一起生成一个更大的网络，从而包含更多的主机。</p>
<p>CIDR采用8-30位可变网络ID（最大可用的只能为30位，即保留2位给主机位），而不是A、B、C类网络ID所用的固定的8、16和24位。<br>CIDR表示方法：IP地址&#x2F;n，n表示IP地址中的前n位代表网络部分（n个二进制数1），其余（32-n）位代表主机部分。这种方法称为“斜线记法”，它又称为CIDR记法。</p>
<p>举个例子：子网掩码255.255.255.192，用CIDR表示是多少呢？</p>
<ol>
<li>首先确认的是这是个C类网络地址（C类的默认子网掩码为255.255.255.0）</li>
<li>前面三个字节都是255，转换成二进制都为1，即11111111.11111111.11111111，即24位1。</li>
<li>后面一个字节是192，转换成二进制为11000000，即1占用了2位。</li>
<li>子网掩码共占用了26位1，所以用CIDR表示为&#x2F;26。</li>
<li>如果网络地址为192.168.10.0，再加上CIDR，最后表示为192.168.10.0&#x2F;26。</li>
</ol>
<p>CIDR支持路由聚合，能够将路由表中的许多路由条目合并为成更少的数目，因此可以限制路由器中路由表的增大，减少路由通告，减轻路由器的负担。 </p>
<h4 id="VLSM可变长子网掩码"><a href="#VLSM可变长子网掩码" class="headerlink" title="VLSM可变长子网掩码"></a>VLSM可变长子网掩码</h4><p>VLSM（Variable Length Subnet Mask，<strong>可变长子网掩码</strong>）规定了在一个有类（A、B、C类）网络内包含多个子网掩码的能力，以及对一个子网的再进行子网划分的能力。</p>
<p>每一个IP地址都包含了2部分：网络号和主机号。在有类网络中，32bit的IP地址被分为4段，每段8bit来表示。这使得作为网络号的前缀必须是8位，16位或者24位。当网络号是24位的时候，主机号只有8位，也就是说，可分配的最小的地址块是256个（2^8&#x3D;256，而实际可分配的主机地址还要减去两个，一个是网络地址，一个是广播地址，最后为254个），这个数量对于大多数企业来说是不够的。</p>
<p>而比这个大一点的IP地址块是网络号为16位的时候，这个时候可分配的地址块是65536（2^16&#x3D;65536），这个数量对于大多数公司又太多了。这导致无论公司选择哪种类型的网络，都可能对IP地址造成大量的浪费。</p>
<p>IP地址如果只使用有类（A、B、C类）来划分，会造成大量的浪费或者不够用。VLSM的诞生有效的解决了这个问题，可以在有类网络的基础上，通过对IP地址的主机号进行再划分，把一部分划入网络号，就能划分各种类型大小的网络了。网络号也不再仅局限在8、16和24位这几个数，而是灵活变化的大小了。</p>
<h4 id="CIDR与VLSM的区别"><a href="#CIDR与VLSM的区别" class="headerlink" title="CIDR与VLSM的区别"></a>CIDR与VLSM的区别</h4><ul>
<li>在使用CIDR聚合地址时，将原来有类IP地址中的网络位划出一部分作为主机位使用。</li>
<li>在使用VLSM划分子网时，将原来有类IP地址中的主机位按照需要划出一部分作为网络位使用。</li>
<li>CIDR：子网掩码往左边移，掩码netmask缩短了。</li>
<li>VLSM：子网掩码往右边移，掩码netmask增长了。</li>
<li>CIDR是把几个有类网络合成一个大的网络（超网），用于路由地址聚合。</li>
<li>VLSM是把一个有类网络分成几个小型网络（子网），用于更高效划分子网。</li>
</ul>
<h4 id="CIDR与VLSM总结"><a href="#CIDR与VLSM总结" class="headerlink" title="CIDR与VLSM总结"></a>CIDR与VLSM总结</h4><p>在某种程度上来说，CIDR和VLSM它们之间可以看做是逆过程。<br>CIDR是把几个小网络聚合成一个大网络来做表示，而VLSM则是把一个大网络继续细分为几个小网络进行IP地址分配。<br>CIDR能让路由器的路由条目得到有效的减少，从而减少路由通告，降低路由器负担，而VLSM则是充分利用IP进行地址分配来解决IP地址不被浪费的问题，节约IP地址空间，更为有效的使用。</p>
<h3 id="路由聚合-构造超网"><a href="#路由聚合-构造超网" class="headerlink" title="路由聚合**(构造超网)**"></a>路由聚合**(构造超网)**</h3><p>由于CIDR的特点就是把网络前缀都相同的连续的IP地址组成了一个“CIDR地址块” ，在这个块内的所有IP地址的网络位都是相同的。（其实跟传统有类IP地址的网段的概念，以及子网掩码必须是连续的0和1，有异曲同工之妙）。 </p>
<p>因此我们只要知道了一个给定的CIDR地址块中的任何一个地址，都能够推算出来这个地址块里面包含多少个IP地址，并且能推算出这个地址块的最小地址和最大地址。 </p>
<p>由于一个CIDR地址块中有很多地址，所以在路由表中就利用CIDR地址块来查找目的网络，这就是路由聚合的核心思想，它使得路由表中的一个条目可以表示原来传统的有类IP地址的很多个条目，所以路由聚合也称为<strong>超网</strong>，尤其在大规模的网络中，使路由表缩减的效果极其明显。 </p>
<p>例如：</p>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/%E8%B7%AF%E7%94%B1%E8%81%9A%E5%90%88.jpg"></p>
<h4 id="最长前缀匹配-1"><a href="#最长前缀匹配-1" class="headerlink" title="最长前缀匹配"></a>最长前缀匹配</h4><p>如果路由表查表转发分组时发现有多条路由可选择时，则选择网络前缀最长的那条进行转发。这样可以使路由更加具体</p>
<h2 id="DHCP"><a href="#DHCP" class="headerlink" title="DHCP"></a>DHCP</h2><p>DHCP：Dynamic Host Configuration Protocol，作用是允许主机在加入网络的时候，动态地从服务器那里获得IP地址：</p>
<ul>
<li>可以更新对主机在用IP地址的租用期-租期快到了</li>
<li>重新启动时，允许重新使用以前用过的IP地址</li>
<li>支持移动用户加入到该网络（短期在网）</li>
</ul>
<h3 id="DHCP工作概况"><a href="#DHCP工作概况" class="headerlink" title="DHCP工作概况"></a>DHCP工作概况</h3><ol>
<li>主机广播“DHCP discover” 报文[可选] </li>
<li>DHCP 服务器用 “DHCP offer”提供报文响应[可选] </li>
<li>主机请求IP地址：发送 “DHCP request” 报文</li>
<li>DHCP服务器发送地址：“DHCP ack” 报文</li>
</ol>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672665034483.png" alt="1672665034483"></p>
<p>假设一个联网笔记本需要获取自己的IP地址，第一条路由器地址和DNS服务器：采用DHCP协议：</p>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672665221376.png" alt="1672665221376"></p>
<ol>
<li>首先DHCP请求被封装在UDP段中，封装在IP数据报中，封装在以太网的帧中。</li>
<li>以太网帧在局域网范围内广播 (dest: FFFFFFFFFFFF) ，并被运行DHCP服务的路由器收到 </li>
<li>以太网帧解封装成IP，IP解封装成UDP，解封装成DHCP</li>
<li>DHCP服务器生成DHCP ACK， 包含客户端的IP地址，第一跳路由器的IP地址和DNS域名服务器的IP地址</li>
<li>DHCP服务器封装的报文所在的帧转发到客户端，在客户端解封装成DHCP报文</li>
<li>客户端知道它自己的IP地址，DNS服务器的名字和IP地址，第一跳路由器的IP地址</li>
</ol>
<h2 id="NAT"><a href="#NAT" class="headerlink" title="NAT"></a>NAT</h2><h3 id="概况"><a href="#概况" class="headerlink" title="概况"></a>概况</h3><p>NAT（ Network Address Translation）是一种地址转换技术，它可以将IP数据报文头中的IP地址转换为另一个IP地址，并通过转换端口号达到地址重用的目的。NAT作为一种缓解IPv4公网地址枯竭的过渡技术，由于实现简单，得到了广泛应用。</p>
<p>随着网络应用的增多，IPv4地址枯竭的问题越来越严重。尽管IPv6可以从根本上解决IPv4地址空间不足问题，但目前众多网络设备和网络应用大多是基于IPv4的，因此在IPv6广泛应用之前，使用一些过渡技术（如CIDR、私网地址等）是解决这个问题的主要方式，NAT就是这众多过渡技术中的一种。</p>
<p>当私网用户访问公网的报文到达网关设备后，如果网关设备上部署了NAT功能，设备会将收到的IP数据报文头中的IP地址转换为另一个IP地址，端口号转换为另一个端口号之后转发给公网。在这个过程中，设备可以用同一个公网地址来转换多个私网用户发过来的报文，并通过端口号来区分不同的私网用户，从而达到地址复用的目的。</p>
<p>早期的NAT是指Basic NAT，Basic NAT在技术上实现比较简单，只支持地址转换，不支持端口转换。因此，Basic NAT只能解决私网主机访问公网问题，无法解决IPv4地址短缺问题。后期的NAT主要是指网络地址端口转换NAPT（Network Address Port Translation），NAPT既支持地址转换也支持端口转换，允许多台私网主机共享一个公网IP地址访问公网，因此NAPT才可以真正改善IP地址短缺问题。</p>
<h3 id="NAT的类型"><a href="#NAT的类型" class="headerlink" title="NAT的类型"></a>NAT的类型</h3><p>根据NAT转换是对报文中的源地址进行转换还是对目的地址进行转换，NAT可以分为源NAT、目的NAT和双向NAT</p>
<h4 id="源NAT"><a href="#源NAT" class="headerlink" title="源NAT"></a>源NAT</h4><p>源NAT在NAT转换时，仅对报文中的源地址进行转换，主要应用于私网用户访问公网的场景。当私网用户主机访问Internet时，私网用户主机发送的报文到达NAT设备后，设备通过源NAT技术将报文中的私网IPv4地址转换成公网IPv4地址，从而使私网用户可以正常访问Internet。</p>
<p>根据转换时是否同时转换源端口号，源NAT可以细分为如下几种类型，详见下图。</p>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/download.png"></p>
<h4 id="目的NAT"><a href="#目的NAT" class="headerlink" title="目的NAT"></a>目的NAT</h4><p>目的NAT在NAT转换时，仅对报文中的目的地址和目的端口号进行转换，主要应用于公网用户访问私网服务的场景。当公网用户主机发送的报文到达NAT设备后，设备通过目的NAT技术将报文中的公网IPv4地址转换成私网IPv4地址，从而使公网用户可以使用公网地址访问私网服务。</p>
<p>根据转换前后的地址是否存在一种固定的映射关系，目的NAT可以细分为如下几种类型，详见下图。</p>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/download%20(1).png"></p>
<h4 id="双向NAT"><a href="#双向NAT" class="headerlink" title="双向NAT"></a>双向NAT</h4><p>双向NAT指的是在转换过程中同时转换报文的源信息和目的信息。双向NAT不是一个单独的功能，而是源NAT和目的NAT的组合。双向NAT是针对同一条流，在其经过设备时同时转换报文的源地址和目的地址。双向NAT主要应用在同时有外网用户访问内部服务器和私网用户访问内部服务器的场景。</p>
<h4 id="STUN中定义的NAT类型"><a href="#STUN中定义的NAT类型" class="headerlink" title="STUN中定义的NAT类型"></a>STUN中定义的NAT类型</h4><p>在STUN标准中，根据私网IP地址和端口到NAT出口的公网IP地址和端口的映射方式，把NAT分为如下四种类型，详见下图。 </p>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/download%20(2).png"></p>
<ul>
<li><p><strong>Full Cone NAT（完全锥型NAT）</strong></p>
<p>所有从同一个私网IP地址和端口（IP1:Port1）发送过来的请求都会被映射成同一个公网IP地址和端口（IP:Port）。并且，任何外部主机通过向映射的公网IP地址和端口发送报文，都可以实现和内部主机进行通信。</p>
<p>这是一种比较宽松的策略，只要建立了私网IP地址和端口与公网IP地址和端口的映射关系，所有的Internet上的主机都可以访问该NAT之后的主机。</p>
</li>
<li><p><strong>Restricted Cone NAT（限制锥型NAT）</strong></p>
<p>所有从同一个私网IP地址和端口（IP1:Port1）发送过来的请求都会被映射成同一个公网IP和端口号（IP:Port）。与完全锥型NAT不同的是，当且仅当内部主机之前已经向公网主机发送过报文，此时公网主机才能向私网主机发送报文。</p>
</li>
<li><p><strong>Port Restricted Cone NAT（端口限制锥型NAT）</strong></p>
<p>与限制锥型NAT很相似，只不过它包括端口号。也就是说，一台公网主机（IP2:Port2）想给私网主机发送报文，必须是这台私网主机先前已经给这个IP地址和端口发送过报文。</p>
</li>
<li><p><strong>Symmetric NAT（对称NAT）</strong></p>
<p>所有从同一个私网IP地址和端口发送到一个特定的目的IP地址和端口的请求，都会被映射到同一个IP地址和端口。如果同一台主机使用相同的源地址和端口号发送报文，但是发往不同的目的地，NAT将会使用不同的映射。此外，只有收到数据的公网主机才可以反过来向私网主机发送报文。</p>
<p>这和端口限制锥型NAT不同，端口限制锥型NAT是所有请求映射到相同的公网IP地址和端口，而对称NAT是不同的请求有不同的映射。</p>
</li>
</ul>
<h3 id="NAPT工作原理"><a href="#NAPT工作原理" class="headerlink" title="NAPT工作原理"></a>NAPT工作原理</h3><p>NAPT在进行地址转换的同时还进行端口转换，可以实现多个私网用户共同使用一个公网IP地址上网。NAPT根据端口来区分不同用户，真正做到了地址复用。 </p>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/download%20(3).png"></p>
<p>当Host访问Web Server时，设备的处理过程如下：</p>
<ol>
<li>设备收到Host发送的报文后查找NAT策略，发现需要对报文进行地址转换。</li>
<li>设备根据源IP Hash算法从NAT地址池中选择一个公网IP地址，替换报文的源IP地址，同时使用新的端口号替换报文的源端口号，并建立会话表，然后将报文发送至Internet。</li>
<li>设备收到Web Server响应Host的报文后，通过查找会话表匹配到步骤2中建立的表项，将报文的目的地址替换为Host的IP地址，将报文的目的端口号替换为原始的端口号，然后将报文发送至Intranet。</li>
</ol>
<h3 id="NAT-Server工作原理"><a href="#NAT-Server工作原理" class="headerlink" title="NAT Server工作原理"></a>NAT Server工作原理</h3><p>使用NAT Server时，需要先在设备上配置公网地址和私网地址的固定映射关系。配置完成后，设备将会生成Server-Map表项，存放公网地址和私网地址的映射关系。该表项将一直存在除非NAT Server的配置被删除。</p>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/download%20(4).png"></p>
<p>内部Server的私网IPv4地址为192.168.1.2&#x2F;24，对外的公网IPv4地址为1.1.1.10，端口号都为80，它们之间的映射关系在设备上已提前配置好。当Host访问Server时，设备的处理过程如下：</p>
<ol>
<li>设备收到Internet上用户访问1.1.1.10的报文的首包后，查找并匹配到Server-Map表项，将报文的目的IP地址转换为192.168.1.2。</li>
<li>设备建立会话表，然后将报文发送至Intranet。</li>
<li>设备收到Server响应Host的报文后，通过查找会话表匹配到步骤2中建立的表项，将报文的源地址替换为1.1.1.10，然后将报文发送至Internet。</li>
<li>后续Host继续发送给Server的报文，设备都会直接根据会话表项的记录对其进行转换，而不会再去查找Server-map表项。</li>
</ol>
<h3 id="NAT的应用"><a href="#NAT的应用" class="headerlink" title="NAT的应用"></a>NAT的应用</h3><h4 id="私网用户通过NAPT访问Internet"><a href="#私网用户通过NAPT访问Internet" class="headerlink" title="私网用户通过NAPT访问Internet"></a>私网用户通过NAPT访问Internet</h4><p>在许多小区、学校和企业的私网规划中，由于公网地址资源有限，通常给私网用户分配私网IPv4地址。此时，可以配置源NAT来实现私网用户访问Internet。用户可以根据自己拥有的公网IPv4地址的个数，选择使用NAPT或者Easy IP。</p>
<p>当用户拥有的公网IP地址个数较多时，配置了NAT设备出接口的IP地址和其他应用之后，还有可用的空闲公网IP地址时，可以选择NAPT。NAPT使用地址池内的IPv4地址作为私网主机转换后的公网IPv4地址。如下图所示，在设备上配置NAPT，实现私网主机访问Internet功能。</p>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672667124873.png" alt="1672667124873"></p>
<h4 id="私网用户通过Easy-IP访问Internet"><a href="#私网用户通过Easy-IP访问Internet" class="headerlink" title="私网用户通过Easy IP访问Internet"></a>私网用户通过Easy IP访问Internet</h4><p>当用户拥有的公网IPv4地址个数较少时，配置了NAT设备出接口的IPv4地址和其他应用之后，没有可用的空闲公网IPv4地址时，可以选择Easy IP。Easy IP使用出接口的IPv4地址作为私网主机转换后的公网IPv4地址。如下图所示，在设备上配置Easy IP，实现私网主机访问Internet功能。 </p>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672667195297.png" alt="1672667195297"></p>
<h4 id="公网用户通过NAT-Server访问私网服务器"><a href="#公网用户通过NAT-Server访问私网服务器" class="headerlink" title="公网用户通过NAT Server访问私网服务器"></a>公网用户通过NAT Server访问私网服务器</h4><p>在某些场合，私网中有一些服务器需要向公网用户提供服务，比如私网中部署的一些Web服务器、FTP服务器等，NAT支持这样的应用，此时可以配置NAT Server来实现公网用户访问私网服务器。如下图所示，在设备上配置NAT Server，固定“公网IP地址＋端口号”与“私网IP地址＋端口号”间的映射关系，实现公网主机通过该映射关系访问私网服务器功能。 </p>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672667171436.png" alt="1672667171436"></p>
<h2 id="IPv6"><a href="#IPv6" class="headerlink" title="IPv6"></a>IPv6</h2><p>IPv6是英文“Internet Protocol Version 6”（互联网协议第6版）的缩写，是用于替代IPv4的下一代IP协议，也就是下一代互联网的协议。</p>
<p>IPv6的使用，不仅能解决网络地址资源数量的问题，而且也解决了多种接入设备连入互联网的障碍。其128位地址格式将以其在IP地址数量、安全性、移动性、服务质量等方面的巨大优势，改变现代信息生活。</p>
<p>互联网数字分配机构（IANA）在2016年已向国际互联网工程任务组（IETF）提出建议，要求新制定的国际互联网标准只支持IPv6，不再兼容IPv4。</p>
<h3 id="IPv6数据报格式"><a href="#IPv6数据报格式" class="headerlink" title="IPv6数据报格式"></a>IPv6数据报格式</h3><p>相比于IPv4，IPv6依旧是固定的40 字节头部，但是数据报传输过程中，不允许分片，如果分组大小超过了传输链路的MTU，将会直接丢弃该分组并向发送端响应错误信息“Packet Too Big”</p>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672668173422.png" alt="1672668173422"></p>
<ul>
<li><strong>Priority：</strong>标示流中数据报的优先级</li>
<li><strong>Flow Label：</strong> 标示数据报在一个“flow.”  ( “flow”的概念没有被严格的定义)</li>
<li><strong>Next header：</strong> 标示上层协议</li>
</ul>
<h4 id="和IPv4的其他变化"><a href="#和IPv4的其他变化" class="headerlink" title="和IPv4的其他变化"></a>和IPv4的其他变化</h4><ul>
<li><strong>Checksum：</strong>被移除掉，降低在每一段中的处理速度</li>
<li><strong>Options：</strong>允许，但是在头部之外, 被 “Next  Header” 字段标示</li>
<li><strong>ICMPv6：</strong>ICMP的新版本<ul>
<li>附加了报文类型, e.g. “Packet Too Big”</li>
<li>多播组管理功能</li>
</ul>
</li>
</ul>
<h3 id="IPv6和IPv4的区别"><a href="#IPv6和IPv4的区别" class="headerlink" title="IPv6和IPv4的区别"></a>IPv6和IPv4的区别</h3><p>IP地址（IPV4）由32位正整数来表示，IP地址在计算机中是以二进制的方式处理，但为了方便记忆采用点十进制的标记方式（8位为一组，分四组，每一组都转换为十进制）如下： </p>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672667402023.png" alt="1672667402023"></p>
<p>与IPv4相比IPv6采用128位的地址，而IPv4使用的是32位。因此新增的地址空间支持2^128 个地址，具体数量340,282,366,920,938,463,463,374,607,431,768,211,456个。这么多的数量足以解决目前IPv4地址量不足的问题。IPv6二进位制下为128位长度，以16位为一组，每组以冒号“:”隔开，可以分为8组： </p>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672667460530.png" alt="1672667460530"></p>
<p>IPv6文本格式为xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx，其中每个 x 都是十六进制数，表示 4 位。例如：2001:0db8:86a3:08d3:1319:8a2e:0370:7344</p>
<h3 id="IPv6的优点"><a href="#IPv6的优点" class="headerlink" title="IPv6的优点"></a>IPv6的优点</h3><ol>
<li><p><strong>更大的地址空间</strong></p>
</li>
<li><p><strong>更高效的路由</strong></p>
<p>IPv6聚集减少了路由表条数，分层使路由更加高效。在IPv6网络中，数据包分片是由源节点而不是中间路由器来处理，提升了IPv6转发效率。</p>
</li>
<li><p><strong>更高效的数据包处理</strong></p>
<p>与IPv4相比，IPv6不 包含IP级别的校验和，因此不需要在每个路由器跃点都重新计算校验和 </p>
</li>
<li><p><strong>更高的安全性能</strong></p>
<p>与IPv4相比，IPv6不 包含IP级别的校验和，因此不需要在每个路由器跃点都重新计算校验和。</p>
</li>
</ol>
<h3 id="IPv6技术特性"><a href="#IPv6技术特性" class="headerlink" title="IPv6技术特性"></a>IPv6技术特性</h3><p>IPv6 在解决了 IPv4 的地址匮乏问题的同时，还在许多方面实现了优化改进，主要包括以下五点： </p>
<ol>
<li><strong>IPv6 具有层次化的编址方式</strong>，地址分配遵循聚类（Aggregation）的原则，同时通过使用更小的路由表，使得路由器能在路由表中用一条记录（Entry）表示一片子网，大大减小了路由器中路由表的长度，有利于骨干网路由器对数据包的快速转发有效提高转发速度。 </li>
<li><strong>IPv6 增 强了组播支持以及对流的控制能力</strong>，为多媒体应用和服务质量（QoS，Quality of Service）控制提供了更好的网络平台。 </li>
<li><strong>IPv6 同时定义了更灵活的地址配置机制</strong>：无状态和有状态地址自动配置机制。 </li>
<li><strong>IPv6 简化了数据包报头</strong>，减少处理器开销并节省网络带宽。这就使得路由器在处理 IPv6 报头时更为高效。此外，IPv6 使用新的头部格式，其选项与基本头部分开，如果新的技术或应用需要，可将选项插入到基本头部与上层数据之间，这在简化路由处理过程中保证了协议的可扩展性。</li>
<li><strong>IPv6 拥有基于海量地址空间下的即插即用优势</strong>，可更便捷地支持移动性，并可更方便地支持快速、层次、代理以及分布式等多种模式下的移动性管理。</li>
</ol>
<h2 id="通用转发和SDN"><a href="#通用转发和SDN" class="headerlink" title="通用转发和SDN"></a>通用转发和SDN</h2><h3 id="导论"><a href="#导论" class="headerlink" title="导论"></a>导论</h3><p>在前面介绍<a href="#%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F">网络层服务 - 数据平面和控制平面实现方式</a>的时候，我们介绍了传统方式（per-router）和SDN方式的工作原理及优劣势</p>
<h4 id="传统方式（per-router）"><a href="#传统方式（per-router）" class="headerlink" title="传统方式（per-router）"></a>传统方式（per-router）</h4><p>传统方式下（per-router），路由器都是通过IP转发的形式对到来的分组按照查路由表的表项，从而决定如何转发，这部分功能处于数据平面，而如何路由（决定路径、计算路由表）这部分功能又处在控制平面。此外还有其他种类繁多的网络设备（中间盒）如：交换机、防火墙、NAT、IDS、负载均衡设备，随着未来不断增加的需求可能还需要更多相应的网络设备。</p>
<p>传统方式下由于需要不同的设备去实现不同的网络功能，因此每台设备都集成了控制平面和数据平面的功能，控制平面分布式地实现了各种控制平面功能，使得升级和部署网络设备非常困难</p>
<h4 id="SDN方式"><a href="#SDN方式" class="headerlink" title="SDN方式"></a>SDN方式</h4><p>相比较传统方式SDN采用了逻辑上集中的控制平面，由一个不同的（通常是远程）控制器和CA交互，控制器决定分组转发的逻辑（可编程），由CA所在设备执行逻辑。</p>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672833168742.png" alt="1672833168742"></p>
<p>因此相较于传统方式SDN具备了以下优点：</p>
<ol>
<li><p><strong>水平集成</strong>控制平面的<strong>开放实现</strong>（而非私有实现），创造出好的产业生态，促进发展</p>
<p>分组交换机、控制器和各种控制逻辑网络应用app可由不同厂商生产，专业化，引入竞争形成良好生态</p>
</li>
<li><p><strong>集中</strong>式实现控制逻辑，网络<strong>管理容易</strong></p>
<p>集中式控制器了解网络状况，编程简单，传统方式困难，避免路由器的误配置</p>
</li>
<li><p>基于流表的<strong>匹配+行动</strong>的工作方式允许“<strong>可编程的</strong>”分组交换机 </p>
<p>实现流量工程等高级特性，在此框架下实现各种新型（未来）的网络设备</p>
</li>
</ol>
<h3 id="SDN架构"><a href="#SDN架构" class="headerlink" title="SDN架构"></a>SDN架构</h3><h4 id="数据平面交换机"><a href="#数据平面交换机" class="headerlink" title="数据平面交换机"></a>数据平面交换机</h4><p>数据平面交换机是一个快速，简单，商业化的交换设备，采用硬件实现通用转发功能，流表被控制器计算和安装，基于南向API（例如OpenFlow），SDN控制器访问基于流的交换机，它定义了哪些可以被控制，哪些不能，也定义了和控制器的协议（e.g.,OpenFlow)</p>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672835501755.png" alt="1672835501755"></p>
<h4 id="SDN控制器"><a href="#SDN控制器" class="headerlink" title="SDN控制器"></a>SDN控制器</h4><p>SDN控制器（网络OS）负责维护网络状态信息， 通过上面的北向API和网络控制应用交互； 通过下面的南向API和网络交换机交互。逻辑上集中，但是在实现上通常由于性能、可扩展性、 容错性以及鲁棒性采用分布式方法 。</p>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672835573794.png" alt="1672835573794"></p>
<h4 id="网络控制应用"><a href="#网络控制应用" class="headerlink" title="网络控制应用"></a>网络控制应用</h4><p>网络控制应用相当于控制的大脑，它采用下层提供的服务（SDN控制器提供的 API)，实现网络功能。如路由器（交换机）、接入控制（防火墙）、负载均衡等其他功能。控制应用与SDN架构下的其他功能模块是非绑定关系，这意味着它可以被第三方提供 ，与控制器厂商可以不同，与分组交换机厂商也可以不同 </p>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672835925091.png" alt="1672835925091"></p>
<h3 id="流表"><a href="#流表" class="headerlink" title="流表"></a>流表</h3><p>每个路由器都包含一个流表（被逻辑上集中的控制器计算和分发）</p>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672835980854.png" alt="1672835980854"></p>
<h4 id="OpenFlow-数据平面抽象"><a href="#OpenFlow-数据平面抽象" class="headerlink" title="OpenFlow - 数据平面抽象"></a>OpenFlow - 数据平面抽象</h4><p>OpenFlow是一种网络通信协议，属于数据层链路，能够控制网上交换器或路由器的转发平面（forwarding plane），借此改变网络数据包所走的网络路径。 </p>
<p>OpenFlow通用转发采用简单的分组处理规则，收到分组后会将分组的头部字段和流表进行匹配，对匹配上的分组，可以进行丢弃、转发、修改、将匹配的分组发送给控制器等行为。</p>
<ul>
<li><strong>优先权Priority：</strong>几个模式匹配了，优先采用哪个，消除歧义 </li>
<li><strong>计数器Counters：</strong>#bytes 以及 #packets</li>
</ul>
<p><strong>路由器中的流表定义了路由器的匹配+行动规则</strong> （流表由控制器计算并下发） </p>
<h4 id="OpenFlow-流表的表项结构"><a href="#OpenFlow-流表的表项结构" class="headerlink" title="OpenFlow - 流表的表项结构"></a>OpenFlow - 流表的表项结构</h4><p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672836416872.png" alt="1672836416872"></p>
<p><strong>例子</strong></p>
<p><img src="/2023/08/30/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/1672836601682.png" alt="1672836601682"></p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" rel="tag"># 计算机网络</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2023/08/20/%E4%BC%A0%E8%BE%93%E5%B1%82/" rel="prev" title="传输层">
      <i class="fa fa-chevron-left"></i> 传输层
    </a></div>
      <div class="post-nav-item">
    <a href="/2023/09/12/%E7%BD%91%E7%BB%9C%E5%B1%82%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2/" rel="next" title="网络层 - 控制平面">
      网络层 - 控制平面 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82-%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2"><span class="nav-number">1.</span> <span class="nav-text">网络层 - 数据平面</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82%E6%9C%8D%E5%8A%A1"><span class="nav-number">1.1.</span> <span class="nav-text">网络层服务</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82%E5%85%B3%E9%94%AE%E5%8A%9F%E8%83%BD"><span class="nav-number">1.1.1.</span> <span class="nav-text">网络层关键功能</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BD%AC%E5%8F%91"><span class="nav-number">1.1.1.1.</span> <span class="nav-text">转发</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1"><span class="nav-number">1.1.1.2.</span> <span class="nav-text">路由</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2%E3%80%81%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2"><span class="nav-number">1.1.2.</span> <span class="nav-text">网络层：数据平面、控制平面</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2"><span class="nav-number">1.1.2.1.</span> <span class="nav-text">数据平面</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%BD%AC%E5%8F%91%E6%96%B9%E6%B3%95%EF%BC%9A"><span class="nav-number">1.1.2.1.1.</span> <span class="nav-text">转发方法：</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2"><span class="nav-number">1.1.2.2.</span> <span class="nav-text">控制平面</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E6%96%B9%E6%B3%95%EF%BC%9A"><span class="nav-number">1.1.2.2.1.</span> <span class="nav-text">路由方法：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2-x2F-%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F"><span class="nav-number">1.1.3.</span> <span class="nav-text">数据平面&#x2F;控制平面实现方式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BC%A0%E7%BB%9F%E6%96%B9%E5%BC%8F%EF%BC%9A%E6%AF%8F%E4%B8%80%E8%B7%AF%E7%94%B1%E5%99%A8%EF%BC%88Per-router%EF%BC%89%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2"><span class="nav-number">1.1.3.1.</span> <span class="nav-text">传统方式：每一路由器（Per-router）控制平面</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BC%A0%E7%BB%9F%E6%96%B9%E5%BC%8F%E4%B8%8B%E8%B7%AF%E7%94%B1%E5%92%8C%E8%BD%AC%E5%8F%91%E7%9A%84%E7%9B%B8%E4%BA%92%E4%BD%9C%E7%94%A8"><span class="nav-number">1.1.3.1.1.</span> <span class="nav-text">传统方式下路由和转发的相互作用</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SDN%E6%96%B9%E5%BC%8F%EF%BC%9A%E9%80%BB%E8%BE%91%E9%9B%86%E4%B8%AD%E7%9A%84%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2%E3%80%90%E8%BD%AF%E4%BB%B6%E5%AE%9A%E4%B9%89%E7%BD%91%E7%BB%9C%E3%80%91"><span class="nav-number">1.1.3.2.</span> <span class="nav-text">SDN方式：逻辑集中的控制平面【软件定义网络】</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#SDN%E7%9A%84%E4%B8%BB%E8%A6%81%E6%80%9D%E8%B7%AF"><span class="nav-number">1.1.3.2.1.</span> <span class="nav-text">SDN的主要思路</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E6%A8%A1%E5%9E%8B"><span class="nav-number">1.1.4.</span> <span class="nav-text">网络服务模型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A6%82%E5%BF%B5"><span class="nav-number">1.1.4.1.</span> <span class="nav-text">概念</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%9E%E6%8E%A5%E5%BB%BA%E7%AB%8B"><span class="nav-number">1.1.4.2.</span> <span class="nav-text">连接建立</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E6%A8%A1%E5%9E%8B-1"><span class="nav-number">1.1.4.3.</span> <span class="nav-text">网络服务模型</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="nav-number">1.2.</span> <span class="nav-text">路由器工作原理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E5%99%A8%E7%BB%93%E6%9E%84%E6%A6%82%E5%86%B5"><span class="nav-number">1.2.1.</span> <span class="nav-text">路由器结构概况</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E7%AB%AF%E5%8F%A3%E5%8A%9F%E8%83%BD"><span class="nav-number">1.2.1.1.</span> <span class="nav-text">输入端口功能</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9F%BA%E4%BA%8E%E7%9B%AE%E6%A0%87%E7%9A%84%E8%BD%AC%E5%8F%91"><span class="nav-number">1.2.1.1.1.</span> <span class="nav-text">基于目标的转发</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E6%9C%80%E9%95%BF%E5%89%8D%E7%BC%80%E5%8C%B9%E9%85%8D"><span class="nav-number">1.2.1.1.1.1.</span> <span class="nav-text">最长前缀匹配</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E7%AB%AF%E5%8F%A3%E7%BC%93%E5%AD%98"><span class="nav-number">1.2.1.1.2.</span> <span class="nav-text">输入端口缓存</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%A4%E6%8D%A2%E7%BB%93%E6%9E%84"><span class="nav-number">1.2.1.2.</span> <span class="nav-text">交换结构</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#3%E7%A7%8D%E5%85%B8%E5%9E%8B%E7%9A%84%E4%BA%A4%E6%8D%A2%E6%9C%BA%E6%9E%84"><span class="nav-number">1.2.1.2.1.</span> <span class="nav-text">3种典型的交换机构</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E9%80%9A%E8%BF%87%E5%86%85%E5%AD%98%E4%BA%A4%E6%8D%A2%E3%80%90%E5%9F%BA%E4%BA%8Ememory%E3%80%91"><span class="nav-number">1.2.1.2.1.1.</span> <span class="nav-text">通过内存交换【基于memory】</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E9%80%9A%E8%BF%87%E6%80%BB%E7%BA%BF%E4%BA%A4%E6%8D%A2%E3%80%90%E4%B8%8D%E6%98%AF%E7%B3%BB%E7%BB%9F%E6%80%BB%E7%BA%BF%E3%80%91"><span class="nav-number">1.2.1.2.1.2.</span> <span class="nav-text">通过总线交换【不是系统总线】</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E9%80%9A%E8%BF%87%E4%BA%92%E8%81%94%E7%BD%91%E7%BB%9C%EF%BC%88crossbar%E7%AD%89%EF%BC%89%E7%9A%84%E4%BA%A4%E6%8D%A2"><span class="nav-number">1.2.1.2.1.3.</span> <span class="nav-text">通过互联网络（crossbar等）的交换</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BE%93%E5%87%BA%E7%AB%AF%E5%8F%A3"><span class="nav-number">1.2.1.3.</span> <span class="nav-text">输出端口</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%BE%93%E5%87%BA%E7%AB%AF%E5%8F%A3%E6%8E%92%E9%98%9F"><span class="nav-number">1.2.1.3.1.</span> <span class="nav-text">输出端口排队</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%BE%93%E5%87%BA%E7%AB%AF%E5%8F%A3%E7%BC%93%E5%AD%98%E5%A4%A7%E5%B0%8F"><span class="nav-number">1.2.1.3.2.</span> <span class="nav-text">输出端口缓存大小</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B0%83%E5%BA%A6%E6%9C%BA%E5%88%B6"><span class="nav-number">1.2.1.4.</span> <span class="nav-text">调度机制</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%B0%83%E5%BA%A6%E7%AD%96%E7%95%A5%EF%BC%9A%E4%BC%98%E5%85%88%E6%9D%83"><span class="nav-number">1.2.1.4.1.</span> <span class="nav-text">调度策略：优先权</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%B0%83%E5%BA%A6%E7%AD%96%E7%95%A5%EF%BC%9A%E5%85%B6%E4%BB%96%E7%9A%84"><span class="nav-number">1.2.1.4.2.</span> <span class="nav-text">调度策略：其他的</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#Round-Robin%EF%BC%88RR%EF%BC%89scheduling"><span class="nav-number">1.2.1.4.2.1.</span> <span class="nav-text">Round Robin（RR）scheduling</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Weighted-Fair-Queuing%EF%BC%88WEQ%EF%BC%89"><span class="nav-number">1.2.1.4.2.2.</span> <span class="nav-text">Weighted Fair Queuing（WEQ）</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IP-Internet-Protocol"><span class="nav-number">1.3.</span> <span class="nav-text">IP - Internet Protocol</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A6%82%E5%BF%B5-1"><span class="nav-number">1.3.1.</span> <span class="nav-text">概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IP%E5%9C%B0%E5%9D%80%E7%BB%84%E6%88%90"><span class="nav-number">1.3.2.</span> <span class="nav-text">IP地址组成</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IP%E5%9C%B0%E5%9D%80%E5%88%86%E7%B1%BB"><span class="nav-number">1.3.3.</span> <span class="nav-text">IP地址分类</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#A%E7%B1%BB%E5%9C%B0%E5%9D%80"><span class="nav-number">1.3.3.1.</span> <span class="nav-text">A类地址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#B%E7%B1%BB%E5%9C%B0%E5%9D%80"><span class="nav-number">1.3.3.2.</span> <span class="nav-text">B类地址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#C%E7%B1%BB%E5%9C%B0%E5%9D%80"><span class="nav-number">1.3.3.3.</span> <span class="nav-text">C类地址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#D%E7%B1%BB%E5%9C%B0%E5%9D%80"><span class="nav-number">1.3.3.4.</span> <span class="nav-text">D类地址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#E%E7%B1%BB%E5%9C%B0%E5%9D%80"><span class="nav-number">1.3.3.5.</span> <span class="nav-text">E类地址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E8%BD%B4%E8%A1%A8%E7%A4%BA%E5%90%84%E7%B1%BB%E5%9E%8B%E5%9C%B0%E5%9D%80%E5%8F%96%E5%80%BC%E8%8C%83%E5%9B%B4"><span class="nav-number">1.3.3.6.</span> <span class="nav-text">数轴表示各类型地址取值范围</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%89%B9%E6%AE%8AIP%E5%9C%B0%E5%9D%80"><span class="nav-number">1.3.4.</span> <span class="nav-text">特殊IP地址</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%A81%E5%9C%B0%E5%9D%80"><span class="nav-number">1.3.4.1.</span> <span class="nav-text">全1地址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%A80%E5%9C%B0%E5%9D%80"><span class="nav-number">1.3.4.2.</span> <span class="nav-text">全0地址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9B%9E%E7%8E%AF%E5%9C%B0%E5%9D%80"><span class="nav-number">1.3.4.3.</span> <span class="nav-text">回环地址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#A%E3%80%81B%E3%80%81C%E7%B1%BB%E7%A7%81%E6%9C%89%E5%9C%B0%E5%9D%80"><span class="nav-number">1.3.4.4.</span> <span class="nav-text">A、B、C类私有地址</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IP%E6%95%B0%E6%8D%AE%E6%8A%A5%E6%A0%BC%E5%BC%8F"><span class="nav-number">1.3.5.</span> <span class="nav-text">IP数据报格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E7%89%87-Fragment"><span class="nav-number">1.3.6.</span> <span class="nav-text">分片(Fragment)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IP%E7%BC%96%E5%9D%80"><span class="nav-number">1.3.7.</span> <span class="nav-text">IP编址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%90%E7%BD%91-Subnets"><span class="nav-number">1.3.8.</span> <span class="nav-text">子网(Subnets)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81"><span class="nav-number">1.3.9.</span> <span class="nav-text">子网掩码</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81%E7%9A%84%E6%A6%82%E5%BF%B5%E5%8F%8A%E4%BD%9C%E7%94%A8"><span class="nav-number">1.3.9.1.</span> <span class="nav-text">子网掩码的概念及作用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A6%82%E5%BF%B5-2"><span class="nav-number">1.3.9.2.</span> <span class="nav-text">概念</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%9C%E7%94%A8"><span class="nav-number">1.3.9.3.</span> <span class="nav-text">作用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81%E7%9A%84%E7%BB%84%E6%88%90"><span class="nav-number">1.3.9.4.</span> <span class="nav-text">子网掩码的组成</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81%E7%9A%84%E8%A1%A8%E7%A4%BA%E6%96%B9%E6%B3%95"><span class="nav-number">1.3.9.5.</span> <span class="nav-text">子网掩码的表示方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%82%B9%E5%88%86%E5%8D%81%E8%BF%9B%E5%88%B6%E8%A1%A8%E7%A4%BA%E6%B3%95"><span class="nav-number">1.3.9.6.</span> <span class="nav-text">点分十进制表示法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#CIDR%E6%96%9C%E7%BA%BF%E8%AE%B0%E6%B3%95"><span class="nav-number">1.3.9.7.</span> <span class="nav-text">CIDR斜线记法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81%E7%9A%84%E5%88%86%E7%B1%BB"><span class="nav-number">1.3.9.8.</span> <span class="nav-text">子网掩码的分类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BC%BA%E7%9C%81%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81"><span class="nav-number">1.3.9.9.</span> <span class="nav-text">缺省子网掩码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81"><span class="nav-number">1.3.9.10.</span> <span class="nav-text">自定义子网掩码</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CIDR%E4%B8%8EVLSM"><span class="nav-number">1.3.10.</span> <span class="nav-text">CIDR与VLSM</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9C%89%E7%B1%BB%E5%92%8C%E6%97%A0%E7%B1%BB%E7%BD%91%E7%BB%9C%EF%BC%8C%E8%B6%85%E7%BD%91%E5%92%8C%E5%AD%90%E7%BD%91"><span class="nav-number">1.3.10.1.</span> <span class="nav-text">有类和无类网络，超网和子网</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#CIDR%E6%97%A0%E7%B1%BB%E5%88%AB%E5%9F%9F%E9%97%B4%E8%B7%AF%E7%94%B1"><span class="nav-number">1.3.10.2.</span> <span class="nav-text">CIDR无类别域间路由</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#VLSM%E5%8F%AF%E5%8F%98%E9%95%BF%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81"><span class="nav-number">1.3.10.3.</span> <span class="nav-text">VLSM可变长子网掩码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#CIDR%E4%B8%8EVLSM%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">1.3.10.4.</span> <span class="nav-text">CIDR与VLSM的区别</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#CIDR%E4%B8%8EVLSM%E6%80%BB%E7%BB%93"><span class="nav-number">1.3.10.5.</span> <span class="nav-text">CIDR与VLSM总结</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E8%81%9A%E5%90%88-%E6%9E%84%E9%80%A0%E8%B6%85%E7%BD%91"><span class="nav-number">1.3.11.</span> <span class="nav-text">路由聚合**(构造超网)**</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9C%80%E9%95%BF%E5%89%8D%E7%BC%80%E5%8C%B9%E9%85%8D-1"><span class="nav-number">1.3.11.1.</span> <span class="nav-text">最长前缀匹配</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DHCP"><span class="nav-number">1.4.</span> <span class="nav-text">DHCP</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#DHCP%E5%B7%A5%E4%BD%9C%E6%A6%82%E5%86%B5"><span class="nav-number">1.4.1.</span> <span class="nav-text">DHCP工作概况</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#NAT"><span class="nav-number">1.5.</span> <span class="nav-text">NAT</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A6%82%E5%86%B5"><span class="nav-number">1.5.1.</span> <span class="nav-text">概况</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NAT%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="nav-number">1.5.2.</span> <span class="nav-text">NAT的类型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%BA%90NAT"><span class="nav-number">1.5.2.1.</span> <span class="nav-text">源NAT</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%9B%AE%E7%9A%84NAT"><span class="nav-number">1.5.2.2.</span> <span class="nav-text">目的NAT</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%8C%E5%90%91NAT"><span class="nav-number">1.5.2.3.</span> <span class="nav-text">双向NAT</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#STUN%E4%B8%AD%E5%AE%9A%E4%B9%89%E7%9A%84NAT%E7%B1%BB%E5%9E%8B"><span class="nav-number">1.5.2.4.</span> <span class="nav-text">STUN中定义的NAT类型</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NAPT%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="nav-number">1.5.3.</span> <span class="nav-text">NAPT工作原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NAT-Server%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="nav-number">1.5.4.</span> <span class="nav-text">NAT Server工作原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NAT%E7%9A%84%E5%BA%94%E7%94%A8"><span class="nav-number">1.5.5.</span> <span class="nav-text">NAT的应用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A7%81%E7%BD%91%E7%94%A8%E6%88%B7%E9%80%9A%E8%BF%87NAPT%E8%AE%BF%E9%97%AEInternet"><span class="nav-number">1.5.5.1.</span> <span class="nav-text">私网用户通过NAPT访问Internet</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A7%81%E7%BD%91%E7%94%A8%E6%88%B7%E9%80%9A%E8%BF%87Easy-IP%E8%AE%BF%E9%97%AEInternet"><span class="nav-number">1.5.5.2.</span> <span class="nav-text">私网用户通过Easy IP访问Internet</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%AC%E7%BD%91%E7%94%A8%E6%88%B7%E9%80%9A%E8%BF%87NAT-Server%E8%AE%BF%E9%97%AE%E7%A7%81%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-number">1.5.5.3.</span> <span class="nav-text">公网用户通过NAT Server访问私网服务器</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IPv6"><span class="nav-number">1.6.</span> <span class="nav-text">IPv6</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#IPv6%E6%95%B0%E6%8D%AE%E6%8A%A5%E6%A0%BC%E5%BC%8F"><span class="nav-number">1.6.1.</span> <span class="nav-text">IPv6数据报格式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%92%8CIPv4%E7%9A%84%E5%85%B6%E4%BB%96%E5%8F%98%E5%8C%96"><span class="nav-number">1.6.1.1.</span> <span class="nav-text">和IPv4的其他变化</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IPv6%E5%92%8CIPv4%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">1.6.2.</span> <span class="nav-text">IPv6和IPv4的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IPv6%E7%9A%84%E4%BC%98%E7%82%B9"><span class="nav-number">1.6.3.</span> <span class="nav-text">IPv6的优点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IPv6%E6%8A%80%E6%9C%AF%E7%89%B9%E6%80%A7"><span class="nav-number">1.6.4.</span> <span class="nav-text">IPv6技术特性</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%9A%E7%94%A8%E8%BD%AC%E5%8F%91%E5%92%8CSDN"><span class="nav-number">1.7.</span> <span class="nav-text">通用转发和SDN</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%BC%E8%AE%BA"><span class="nav-number">1.7.1.</span> <span class="nav-text">导论</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BC%A0%E7%BB%9F%E6%96%B9%E5%BC%8F%EF%BC%88per-router%EF%BC%89"><span class="nav-number">1.7.1.1.</span> <span class="nav-text">传统方式（per-router）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SDN%E6%96%B9%E5%BC%8F"><span class="nav-number">1.7.1.2.</span> <span class="nav-text">SDN方式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SDN%E6%9E%B6%E6%9E%84"><span class="nav-number">1.7.2.</span> <span class="nav-text">SDN架构</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2%E4%BA%A4%E6%8D%A2%E6%9C%BA"><span class="nav-number">1.7.2.1.</span> <span class="nav-text">数据平面交换机</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SDN%E6%8E%A7%E5%88%B6%E5%99%A8"><span class="nav-number">1.7.2.2.</span> <span class="nav-text">SDN控制器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E6%8E%A7%E5%88%B6%E5%BA%94%E7%94%A8"><span class="nav-number">1.7.2.3.</span> <span class="nav-text">网络控制应用</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%81%E8%A1%A8"><span class="nav-number">1.7.3.</span> <span class="nav-text">流表</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#OpenFlow-%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2%E6%8A%BD%E8%B1%A1"><span class="nav-number">1.7.3.1.</span> <span class="nav-text">OpenFlow - 数据平面抽象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#OpenFlow-%E6%B5%81%E8%A1%A8%E7%9A%84%E8%A1%A8%E9%A1%B9%E7%BB%93%E6%9E%84"><span class="nav-number">1.7.3.2.</span> <span class="nav-text">OpenFlow - 流表的表项结构</span></a></li></ol></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">mazuchang</p>
  <div class="site-description" itemprop="description">前行纵然步履维艰，你仍旧走在正确的道路上。</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">8</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">mazuchang</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
